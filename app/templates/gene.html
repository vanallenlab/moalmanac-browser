{% extends 'base.html' %}

{% block title %}
{{ gene.name }} | Molecular Oncology Almanac
{% endblock %}

{% block content %}
  <br>
  <h2 class="title"><em>{{ gene.name }}</em></h2>
  <p><!-- Placeholder for description on the gene record --></p>

  <div class="row align-items-stretch">
    <div class="col-sm-6 d-flex">
      <div class="card flex-fill mb-3">
        <h5 class="card-header">About</h5>
        <div class="card-body compact-card-text">
          <p class="card-text"><strong>Location</strong>: {{ gene.location }}</p>
        </div>
      </div>
    </div>
    <div class="col-sm-6 d-flex">
      <div class="card flex-fill mb-3">
        <h5 class="card-header">Mappings</h5>
        <div class="card-body compact-card-text">
          <p class="card-text"><strong>HGNC</strong>: <a href="{{ gene.primaryCoding.iris[0] }}" target="_blank">{{ gene.primaryCoding.code }}</a></p>
          <p class="card-text"><strong>Ensembl</strong>: <a href="{{ gene.mappings[0].coding.iris[0] }}" target="_blank">{{ gene.mappings[0].coding.code }}</a></p>
          <p class="card-text"><strong>NCBI</strong>: <a href="{{ gene.mappings[1].coding.iris[0] }}" target="_blank">{{ gene.mappings[1].coding.code }}</a></p>
          <p class="card-text"><strong>Refseq</strong>: <a href="{{ gene.mappings[2].coding.iris[0] }}" target="_blank">{{ gene.mappings[2].coding.code }}</a></p>
        </div>
      </div>
    </div>
  </div>

  <h4 class="subtitle">Biomarkers</h4>
  <em>{{ gene.name }}</em> is involved in the following curated <a href="{{ url_for('main.biomarkers') }}">biomarkers</a>.
  <br><br>

  <table id="biomarkers-table-result" class="table table-striped table-hover table-sm small w-100 dataTable">
    <thead>
      <tr>
        <th style="width: 10%">Name</th>
        <th style="width: 10%">Biomarker type</th>
        <th style="width: 10%">Propositions</th>
        <th style="width: 10%">Statements</th>
      </tr>
    </thead>
    <tbody>
      {% for biomarker in biomarkers %}
        <tr data-biomarkerType="{{ biomarker.type }}">
          <td><a href="{{ url_for('main.biomarkers', biomarker_name=biomarker.name | urlencode) }}">{{ biomarker.name }}</a></td>
          <td>{{ biomarker.extensions[0].value }}</td>
          <td>{{ biomarker.propositions_count }}</td>
          <td>{{ biomarker.statements_count }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <br>

  <h4 class="subtitle">Therapeutic response</h4>
  Precision oncology relationships for therapeutic response involving this gene.
  <br><br>

  {% include "statements_table.html" %}
  <br>
{% endblock %}